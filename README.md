# –î–∏–ø–ª–æ–º–Ω—ã–π –ø—Ä–æ–µ–∫—Ç FOODGRAMüçî 
![example workflow](https://github.com/antxrest/foodgram-project-react/actions/workflows/foodgram_workflow.yml/badge.svg)
### üìñ–û–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç Foodgram ¬´–ü—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –ø–æ–º–æ—â–Ω–∏–∫¬ª. –û–Ω–ª–∞–π–Ω-—Å–µ—Ä–≤–∏—Å –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã, –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è —Ä–µ—Ü–µ–ø—Ç—ã –≤ —Å–ø–∏—Å–æ–∫ ¬´–ò–∑–±—Ä–∞–Ω–Ω–æ–µ¬ª, –∞ –ø–µ—Ä–µ–¥ –ø–æ—Ö–æ–¥–æ–º –≤ –º–∞–≥–∞–∑–∏–Ω —Å–∫–∞—á–∏–≤–∞—Ç—å —Å–≤–æ–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –±–ª—é–¥.
### üõ†Ô∏è–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
![image](https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue)
![image](https://img.shields.io/badge/Django-092E20?style=for-the-badge&logo=django&logoColor=green)
![image](https://img.shields.io/badge/django%20rest-ff1709?style=for-the-badge&logo=django&logoColor=white)
![image](https://img.shields.io/badge/Docker-2CA5E0?style=for-the-badge&logo=docker&logoColor=white)
![image](https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white)
![Gunicorn](https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white)
![image](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)
![GitHubActions](https://img.shields.io/badge/GitHub_Actions-black?style=for-the-badge&logo=github-actions&logoColor=white)
![YandexCloud](https://img.shields.io/badge/Yandex_Cloud-FFD43B?style=for-the-badge&logo=yandex-cloud&logoColor=white)
<h3>üñºÔ∏è–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö </h3>
<details>
  <summary>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</summary>
  <img src="./docs/auth.png" name="image-name">
</details>
<details>
  <summary>–†–µ—Ü–µ–ø—Ç—ã</summary>
  <img src="./docs/index.png" name="image-name">
</details>
<details>
  <summary>–ö–∞—Ä—Ç–æ—á–∫–∞ —Ä–µ—Ü–µ–ø—Ç–∞</summary>
  <img src="./docs/recipe.png" name="image-name">
</details>
<details>
  <summary>–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞</summary>
  <img src="./docs/create_recipe.png" name="image-name">
</details>
<details>
  <summary>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</summary>
  <img src="./docs/favorite.png" name="image-name">
</details>
<details>
  <summary>–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫</summary>
  <img src="./docs/shopping_cart.png" name="image-name">
</details>

### üë®üèª‚Äçüíª–†–∞–±–æ—Ç–∞ —Å API:

| –£–≤–∏–¥–µ—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é API –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É | `.../api/docs/` |
|--------|:---------|
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é djoser-—Ç–æ–∫–µ–Ω–∞.

### ‚å®Ô∏è–î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
| –ó–∞–ø—Ä–æ—Å | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ |
|--------|:---------|-------|
| –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |`.../api/users/`| GET, POST |
| –ó–∞–ø—Ä–æ—Å –∏–ª–∏ —Å–º–µ–Ω–Ω–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |`.../api/users/me/`| GET, POST |
| –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ |`.../api/users/{user_id}/`| GET |
| –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)|`.../api/auth/token/login/`| POST |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤, —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç|`.../api/recipes/`| GET, POST |
| –ü–æ–ª—É—á–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –ø–æ id|`.../api/recipes/`| GET, PUT, PATCH, DELETE |
| –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–µ–≥–æ–≤|`.../api/tags/`| GET |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–≥–µ –ø–æ id|`.../api/tags/{tag_id}/`| GET |
| –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤|`.../api/igredients/`| GET |
| –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–µ –ø–æ id|`.../api/igredients/{igredient_id}/`| GET |
| –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è, –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ |`.../api/recipes/{recipes_id}/favorite`| GET, POST |
| –î–æ–±–∞–≤–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω |`.../api/recipes/{recipes_id}/favorite`| GET, POST |
| –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–æ–∫–∞ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ txt|`.../api/recipes/download_shopping_cart`| GET |

### üìù–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é:
1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç.
```
git clone https://github.com/antxrest/foodgram-project-react.git
```
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≤–∞—à–µ–º—É —Å–µ—Ä–≤–µ—Ä—É.
```
ssh <server user>@<server IP>
```
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –î–æ–∫–µ—Ä –Ω–∞ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä.
```
sudo apt install docker.io
```
4. –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è docker-compose.
```
sudo chmod +x /usr/local/bin/docker-compose
```
5. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞.
```
mkdir foodgram && cd foodgram/
```
6. –°–æ–∑–¥–∞–π—Ç–µ env-—Ñ–∞–π–ª.
```
touch .env
```
7. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ env-—Ñ–∞–π–ª.
```

SECRET_KEY = —É–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django –∏–∑ —Ñ–∞–π–ª–∞ settings.py
DB_ENGINE = —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–∏–ø –ë–î default='django.db.backends.postgresql'
DB_NAME = –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER = –ª–æ–≥–∏–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_PASSWORD = –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–π)
DB_HOST = –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
DB_PORT = –ø–æ—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
```
8. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ 'infra/' —Å –ü–ö –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä.
```
scp infra/* <server user>@<server IP>:/home/<server user>/foodgram/
```
9. –ó–∞–ø—É—Å—Ç–∏—Ç–µ docker-compose.
```
sudo docker-compose up -d --build
```
10. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏.
```
sudo docker compose exec -T backend python manage.py makemigrations
sudo docker compose exec -T backend python manage.py migrate
```
11. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä —Å—Ç–∞—Ç–∏–∫–∏.
```
sudo docker-compose exec backend python manage.py collectstatic --noinput
```
12. –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
```
sudo docker-compose exec backend python manage.py createsuperuser
```
13. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º
```
sudo docker-compose exec backend python manage.py load_ingredient_csv
```

### ‚úÖ–ù–∞—Å—Ç—Ä–æ–µ–Ω Workflow, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö —à–∞–≥–æ–≤:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PEP8
- –°–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ –±–µ–∫–µ–Ω–¥–∞ –Ω–∞ DockerHub.
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.
- –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-—á–∞—Ç.

### üîìActions secrets
- `SECRET_KEY` = —É–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django –∏–∑ —Ñ–∞–π–ª–∞ settings.py
- `DB_ENGINE` = —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–∏–ø –ë–î `default='django.db.backends.postgresql'`
- `DB_NAME = postgres` # –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `POSTGRES_USER = postgres` # –ª–æ–≥–∏–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- `POSTGRES_PASSWORD = postgres` # –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- `DB_HOST = db` # –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
- `DB_PORT = 5432` # –ø–æ—Ä—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- `DOCKER_PASSWORD` = –ø–∞—Ä–æ–ª—å –æ—Ç DockerHub
- `DOCKER_USERNAME` = –ª–æ–≥–∏–Ω DockerHub
- `HOST` = –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `SSH_KEY` = –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∫–æ–º–∞–Ω–¥–æ–π  `cat ~/.ssh/id_rsa`
- `TELEGRAM_TO` = –≤–∞—à id –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–µ
- `TELEGRAM_TOKEN` = —Ç–æ–∫–µ–Ω –º–æ–µ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞ `5887905301:AAH0sEw9G4DYclYHF3TywLesob_1nISGCWY`
- `USER` = –ª–æ–≥–∏–Ω –Ω–∞ –≤–∞—à–µ–º —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- `PASSPHRASE` = –ø–∞—Ä–æ–ª—å –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

### üöÄ–ü—Ä–æ–µ–∫—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É [Foodgram](http://84.201.136.174/)
### üõ°Ô∏è–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É:
```
–õ–æ–≥–∏–Ω: admin@gmail.com
–ü–∞—Ä–æ–ª—å: qazwsxedc12345
```
<h2> –ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ </a> 
<img src="https://github.com/blackcater/blackcater/raw/main/images/Hi.gif" height="32" width="32"/></h2>

[–ê–Ω—Ç–æ–Ω –ú–æ–ª—á–∞–Ω–æ–≤](https://github.com/antxrest)

